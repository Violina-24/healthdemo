<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Application Preview</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
    }
    .section {
      margin-bottom: 2rem;
    }
    .section h2 {
      background-color: #f0f0f0;
      padding: 10px;
      border-left: 5px solid #007bff;
    }
    .field {
      margin: 5px 0;
    }
    .field span {
      font-weight: bold;
    }
  </style>
</head>
<body>

<h1>Application Preview</h1>

<div class="section" id="studentSection">
  <h2>Student Information</h2>
  <div class="field"><span>Name:</span> <span id="studentName"></span></div>
  <div class="field"><span>Email:</span> <span id="studentEmail"></span></div>
  <div class="field"><span>Phone:</span> <span id="studentPhone"></span></div>
  <div class="field"><span>Date of Birth:</span> <span id="studentDob"></span></div>
</div>

<div class="section" id="quotaSection">
  <h2>Category & Quota</h2>
  <div class="field"><span>Domicile:</span> <span id="domicile"></span></div>
  <div class="field"><span>Category:</span> <span id="category"></span></div>
  <div class="field"><span>Institute:</span> <span id="institute"></span></div>
  <div class="field"><span>Course:</span> <span id="course"></span></div>
</div>

<div class="section" id="qualificationSection">
  <h2>Qualification</h2>
  <div class="field"><span>Physics:</span> <span id="physics"></span></div>
  <div class="field"><span>Chemistry:</span> <span id="chemistry"></span></div>
  <div class="field"><span>Biology:</span> <span id="biology"></span></div>
  <div class="field"><span>NEET Score:</span> <span id="neet"></span></div>
  <div class="field"><span>Subject Choice:</span> <span id="subjectChoice"></span></div>
</div>

<div class="section" id="documentsSection">
  <h2>Uploaded Documents</h2>
  <div class="field"><span>Passport Photo:</span> <span id="passportPhoto"></span></div>
  <div class="field"><span>Age Proof:</span> <span id="ageProof"></span></div>
  <div class="field"><span>Marksheet:</span> <span id="marksheet"></span></div>
  <div class="field"><span>Caste Certificate:</span> <span id="casteCertificate"></span></div>
  <div class="field"><span>PWD Certificate:</span> <span id="pwdCertificate"></span></div>
  <div class="field"><span>Character Certificate:</span> <span id="characterCertificate"></span></div>
</div>

<form action="/application/submitAll" method="post">
  <button type="submit">Final Submit</button>
</form>

<script>
  const data = JSON.parse(localStorage.getItem("finalPreviewData"));

  if (data) {
    const { studentform, quota, qualification, fileupload } = data;

    // Student Info
    document.getElementById("studentName").textContent = studentform?.name || "-";
    document.getElementById("studentEmail").textContent = data.userEmail || "-";
    document.getElementById("studentPhone").textContent = studentform?.phone || "-";
    document.getElementById("studentDob").textContent = studentform?.dob || "-";

    // Quota Info
    document.getElementById("domicile").textContent = quota?.domicile || "-";
    document.getElementById("category").textContent = quota?.category || "-";
    document.getElementById("institute").textContent = quota?.institute || "-";
    document.getElementById("course").textContent = quota?.course || "-";

    // Qualification Info
    document.getElementById("physics").textContent = qualification?.physics || "-";
    document.getElementById("chemistry").textContent = qualification?.chemistry || "-";
    document.getElementById("biology").textContent = qualification?.biology || "-";
    document.getElementById("neet").textContent = qualification?.neet || "-";
    document.getElementById("subjectChoice").textContent = qualification?.subjectChoice || "-";

    // File Upload Info (filenames)
    document.getElementById("passportPhoto").textContent = fileupload?.passportPhoto || "Not uploaded";
    document.getElementById("ageProof").textContent = fileupload?.ageProof || "Not uploaded";
    document.getElementById("marksheet").textContent = fileupload?.marksheet || "Not uploaded";
    document.getElementById("casteCertificate").textContent = fileupload?.casteCertificate || "Not uploaded";
    document.getElementById("pwdCertificate").textContent = fileupload?.pwdCertificate || "Not uploaded";
    document.getElementById("characterCertificate").textContent = fileupload?.characterCertificate || "Not uploaded";
  } else {
    alert("No preview data found. Please complete the form first.");
    window.location.href = "/studentform";
  }
</script>

</body>
</html>
