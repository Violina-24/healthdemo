<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" type="text/css" href="/css/styles.css">

    <script>
        window.onload = function () {
        fetch('/get-user-details', {
            method: 'GET',
            credentials: 'include'  // Include cookies/session in the request
        })
        .then(response => {
            if (!response.ok) {
                throw new Error("Unable to fetch user details");
            }
            return response.json();
        })
        .then(data => {
            document.getElementById('welcomeMessage').innerText = "WELCOME " + data.name;
        })
        .catch(error => console.error('Error fetching user details:', error));
    };

    </script>
</head>
<body>
<div style="background-color:lightblue; padding-top:2rem; padding-bottom:2rem; margin-top:1.5rem">
    <h1 class="body" id="welcomeMessage" style="text-align:center">WELCOME</h1> <br>
    <form action="/logout" method="POST">
        <button type="submit" style="background-color:red; text-align:center;border-radius: 0.30rem; margin-left:92%; margin-top:5%; color:white; border:0.75px solid lightgray;padding-left: 1.5rem;
        padding-right: 1.5rem;
        padding-top: 0.3rem;
        padding-bottom: 0.3rem;">Logout</button>
    </form>
</div>

<p class="label" style="font-size:25px; text-align:center;">You are logged in!</p>

<div style="border-top: 0.5px solid lightgray; padding-top:0.5rem; padding-bottom:0.5rem">
    <a href="/studentform" style="font-size:20px; margin-left:0.5rem;">Go to MBBS Counselling Form</a> <br>
</div>

</body>
</html>
